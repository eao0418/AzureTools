# AzureTools
This is a collection of tools that will help someone who is looking for more information on their Azure environment
... or someone else's. 

## Project Overview
This project is the baseline for other toolkits that could make integrating Azure information with other security tools, for completing inventories, or for doing recon post-exploitation. 

## Current Problems
Password automation is not fully supported to write to a vault.
IDataReader serialization to a class needs to be rethought due to the way backing classes are implemented. For example, PasswordCredential objects might come back as JObjects.
Configuration-based filtering for Azure object properties needs to be implemented correctly. 
Custom password credential expiration needs to be implemented.

## Future Improvements
- CLI tools to get information about target tenants. 
- Automation tools.

## Requirements
- Run the kafka docker container locally and add the required topics. A really good tool is here: https://developer.confluent.io/confluent-tutorials/kafka-on-docker/
- To implement the Kusto-based automations, one must have an Azure subscription and a kusto cluster with the correct schema. The schema can be automatically generated by calling 'api/GenerateGraphKustoTables' and 'api/GenerateGraphKustoTableMappings'

# Current Automated Processes
## AzureTools.Automation
This is an Azure Function that collects data about a target Azure tenant and persists it in a data store. The only data sinks that are currently supported are local file and Kusto, although it is not configured dynamically at the moment. Filtering by certain properties will be implemented in a future iteration so that one can collect the information that is consistent with their permissions.  

## AzureTools.Automation.Secrets
This is an Azure Function that gets information about expiring password credentials on Application Registrations and updates them with a new version. A versioning system is based on the display name of the password credential plus the unix timestamp (milliseconds) of the creation time of the password credential. This allows the automation to track existing and new versions of password credentials on the same application registraiton.